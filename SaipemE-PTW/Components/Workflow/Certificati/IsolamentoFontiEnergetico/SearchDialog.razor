<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6">Seleziona Certificato Isolamento da Fonti Energetiche</MudText>
        
        
        <MudDataGrid T="string"
                     Items="@moduliFinti"
                     Striped="true"
                     Bordered="true"
                     Class="pa-4">

            <ToolBarContent>
             

                <MudSpacer />
                <MudTextField T="string"
                              Placeholder="Cerca modulo..."
                              Adornment="Adornment.Start"
                              AdornmentIcon="@Icons.Material.Filled.Search"
                              IconSize="Size.Medium"
                              Class="mt-0" />
            </ToolBarContent>

            <Columns>
                
                <PropertyColumn Property="x => x" Title="Certificato" Style="width:90%" />

                <TemplateColumn Title="" Filterable="false">
                    <CellTemplate>
                        <MudButton OnClick="@(() => Seleziona(context.Item))"
                                   Variant="Variant.Outlined"
                                   Color="Color.Secondary" StartIcon="@Icons.Material.Filled.AddCircle"
                                   Size="Size.Small">

                        </MudButton>
                    </CellTemplate>
                </TemplateColumn>
            </Columns>

            <PagerContent>
                <MudDataGridPager T="string" />
            </PagerContent>
        </MudDataGrid>
        
        @* <MudList T="string">
            @foreach (var modulo in moduliFinti)
            {
                <MudListItem OnClick="@(() => Seleziona(modulo))">@modulo</MudListItem>
            }
        </MudList> *@
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Secondary" OnClick="() => MudDialog?.Cancel()">Annulla</MudButton>
    </DialogActions>
</MudDialog>

@code {

    [CascadingParameter]
    private IMudDialogInstance? MudDialog { get; set; }

    private List<string> moduliFinti = new()
    {
        "MOD.ELETT.RM.LIV.2025.00001",
        "MOD.ELETT.RM.LIV.2025.00002",
        "MOD.ELETT.RM.LIV.2025.00003"
    };

    private void Seleziona(string modulo)
    {
        MudDialog?.Close(DialogResult.Ok(modulo));
    }
}
